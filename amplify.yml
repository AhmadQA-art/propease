version: 1
frontend:
  phases:
    preBuild:
      commands:
        - nvm install 20
        - nvm use 20
        - cd propease/frontend  # Changed to match assumed structure
        - npm install
        - npm list vite  # Debug: Verify vite is installed
        - npm install --save react-phone-number-input react-select
    build:
      commands:
        - pwd  # Debug: Confirm current directory
        - ls -l node_modules/vite  # Debug: Check if vite package exists
        - ls -l node_modules/.bin/vite  # Debug: Check if vite binary exists
        - npm run build
  artifacts:
    baseDirectory: propease/frontend/dist  # Adjusted to match new path
    files:
      - '**/*'
  cache:
    paths:
      - propease/frontend/node_modules/**/*  # Adjusted cache path
      - propease/frontend/.npm/**/*